<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Text Cleaner - Utilo</title>
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="header-content container">
        <a href="../index.html" class="logo">üß∞ Utilo</a>
        <nav class="nav-links">
          <a href="../index.html">‚Üê Back to Tools</a>
          <button id="theme-toggle" class="theme-toggle">üåô</button>
        </nav>
      </div>
    </header>

    <!-- Tool Container -->
    <div class="tool-container">
      <!-- Input Panel -->
      <div class="tool-panel">
        <div class="tool-panel-input">
          <label class="tool-panel-label">Input Text</label>
          <textarea
            id="input-text"
            placeholder="Enter your text here..."
          ></textarea>
        </div>
      </div>

      <!-- Output Panel -->
      <div class="tool-panel">
        <div class="tool-panel-output">
          <label class="tool-panel-label">Cleaned Text</label>
          <textarea id="output-text" readonly></textarea>
        </div>
        <div class="tool-controls">
          <button id="process-btn" class="btn btn-primary">Clean Text</button>
          <button id="copy-btn" class="btn btn-secondary">Copy Result</button>
          <button id="download-btn" class="btn btn-secondary">Download</button>
          <button id="clear-btn" class="btn btn-danger">Clear</button>
        </div>
      </div>
    </div>

    <script src="../js/utils.js"></script>
    <script>
      const inputText = document.getElementById('input-text');
      const outputText = document.getElementById('output-text');
      const processBtn = document.getElementById('process-btn');
      const copyBtn = document.getElementById('copy-btn');
      const downloadBtn = document.getElementById('download-btn');
      const clearBtn = document.getElementById('clear-btn');

      function cleanText() {
        const text = inputText.value;
        let cleaned = text
          .replace(/\s+/g, ' ') // Replace multiple spaces with single space
          .replace(/\n\s*\n/g, '\n') // Remove extra blank lines
          .trim();

        outputText.value = cleaned;
      }

      processBtn.addEventListener('click', cleanText);
      inputText.addEventListener('input', cleanText);

      copyBtn.addEventListener('click', () => {
        copyToClipboard(outputText.value, copyBtn);
      });

      downloadBtn.addEventListener('click', () => {
        downloadFile(outputText.value, 'cleaned-text.txt', 'text/plain');
      });

      clearBtn.addEventListener('click', () => {
        inputText.value = '';
        outputText.value = '';
      });
    </script>
  </body>
</html>
